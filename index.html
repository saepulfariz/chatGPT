<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- script by saepulfariz 19/12/2022 -->
    <title>CHAT GPT BY PROFA</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <!-- MDB -->
    <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.0.1/mdb.min.css" rel="stylesheet" /> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.6.16/sweetalert2.all.min.js"></script>




    <link rel="stylesheet"
        href="https://mdbcdn.b-cdn.net/wp-content/themes/mdbootstrap4/docs-app/css/dist/mdb5/standard/core.min.css">

    <style>
        section {
            /* background-image: url('bg.png'); */
            background-size: cover;
        }

        #chat1 .form-outline .form-control~.form-notch div {
            pointer-events: none;
            border: 1px solid;
            border-color: #eee;
            box-sizing: border-box;
            background: transparent;
        }

        #chat1 .form-outline .form-control~.form-notch .form-notch-leading {
            left: 0;
            top: 0;
            height: 100%;
            border-right: none;
            border-radius: .65rem 0 0 .65rem;
        }

        #chat1 .form-outline .form-control~.form-notch .form-notch-middle {
            flex: 0 0 auto;
            max-width: calc(100% - 1rem);
            height: 100%;
            border-right: none;
            border-left: none;
        }

        #chat1 .form-outline .form-control~.form-notch .form-notch-trailing {
            flex-grow: 1;
            height: 100%;
            border-left: none;
            border-radius: 0 .65rem .65rem 0;
        }

        /*  */

        .bg-profa {
            background-color: #f76637;
        }

        #chat1 .form-outline .form-control:focus~.form-notch .form-notch-leading {
            border-top: 0.125rem solid #39c0ed;
            border-bottom: 0.125rem solid #39c0ed;
            border-left: 0.125rem solid #39c0ed;
        }

        #chat1 .form-outline .form-control:focus~.form-notch .form-notch-leading,
        #chat1 .form-outline .form-control.active~.form-notch .form-notch-leading {
            border-right: none;
            transition: all 0.2s linear;
        }

        #chat1 .form-outline .form-control:focus~.form-notch .form-notch-middle {
            border-bottom: 0.125rem solid;
            border-color: #39c0ed;
        }

        #chat1 .form-outline .form-control:focus~.form-notch .form-notch-middle,
        #chat1 .form-outline .form-control.active~.form-notch .form-notch-middle {
            border-top: none;
            border-right: none;
            border-left: none;
            transition: all 0.2s linear;
        }

        #chat1 .form-outline .form-control:focus~.form-notch .form-notch-trailing {
            border-top: 0.125rem solid #39c0ed;
            border-bottom: 0.125rem solid #39c0ed;
            border-right: 0.125rem solid #39c0ed;
        }

        #chat1 .form-outline .form-control:focus~.form-notch .form-notch-trailing,
        #chat1 .form-outline .form-control.active~.form-notch .form-notch-trailing {
            border-left: none;
            transition: all 0.2s linear;
        }

        #chat1 .form-outline .form-control:focus~.form-label {
            color: #39c0ed;
        }

        #chat1 .form-outline .form-control~.form-label {
            color: #bfbfbf;
        }


        #result {
            height: 630px;
        }

        @media (min-width: 576px) {
            #result {
                height: 400px;
            }
        }
		
		.send-icon {
		  transform: rotate(45deg);
		  margin-right: 5px;
		}
		
		.send-icon:hover {
			color: red;
		}
    </style>
</head>

<body>

    <section style="">
        <div class="container py-2 mt-1">

            <div class="row d-flex justify-content-center">
                <div class="col-md-8 col-lg-6 col-xl-4">

                    

                    <div class="card" id="chat1" style="border-radius: 15px;">
                        <div class="card-header d-flex justify-content-between align-items-center p-3 bg-info text-white border-bottom-0"
                            style="border-top-left-radius: 15px; border-top-right-radius: 15px;">
                            <i class="fas fa-angle-left" onclick="salah()"></i>
                            <p class="mb-0 fw-bold">CHAT GPT - PROFA</p>
                            <i class="fas fa-times" onclick="salah()"></i>
                        </div>
                        <div class="position-relative">
                            <button class="btn btn-primary position-absolute top-50 start-50 translate-middle" id="send-progress" type="button" disabled>
                                <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                                Loading...
                              </button>
                        </div>
                        <div class="card-body overflow-auto" id="result">


                            <div class="d-flex flex-row justify-content-start mb-4">
                                <img src="https://openai.com/content/images/size/w256h256/2020/09/icon-1.png"
                                    alt="avatar 1" style="width: 45px; height: 100%;">
                                <div class="p-3 ms-3"
                                    style="border-radius: 15px; background-color: rgba(57, 192, 237,.2);">
                                    <p class="small mb-0">Apakabar kawan, Yuk coba chat dengan AI ini. ^_^</p>
                                </div>
                            </div>


                        </div>
                        <div class="card-footer">
                            <div class="form-outline position-relative">
                                <textarea class="form-control" autofocus id="textAreaExample" rows="3"></textarea>
                                <label class="form-label" for="textAreaExample">Type your message then enter.</label>
								<div class="">
									<div class="position-absolute bottom-0 end-0">
										<!-- d-flex justify-content-end -->
										<div class=" mt-2 me-2">
										
											<svg id="send" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-send-fill m-2  send-icon" viewBox="0 0 16 16">
											  <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"/>
											</svg>
											
											<!--
											<button id="send" class="btn btn-primary">Send</button>

											<button class="btn btn-primary" id="send-progress" type="button" disabled>
												<span class="spinner-border spinner-border-sm" role="status"
													aria-hidden="true"></span>
												Loading...
											</button>
											-->

										</div>
									</div>
								</div>
                            </div>
							
							
							
                            

                        </div>
                        
                    </div>


                </div>
            </div>

        </div>
    </section>
    <div class="pt-1 mt-4 text-primary text-capitalize bg-light shadow" style="background-color: white;">
        <marquee behavior="" direction="">=== Selamat Menggunakan Chat GTP <a class="text-decoration-underline"
                href="https://openai.com/" target="_blank">OpenAI</a> By PROFA (PROGRAMMER FASILKOM) - Ada
            Kala Semua Pertanyaan
            Gak Ada
            Jawaban, Yang Penting Kita Optimis Dalam Menanggapi Nya. - Author <a class="text-decoration-underline"
                href="https://instagram.com/saepulfariz" target="_blank">@saepulfariz</a>
            ====</marquee>
    </div>


    <script src="https://code.jquery.com/jquery-3.6.2.js"
        integrity="sha256-pkn2CUZmheSeyssYw3vMp1+xyub4m+e+QK4sQskvuo4=" crossorigin="anonymous"></script>

    <script>



        $('#send-progress').hide();
		
		const {
		  host, hostname, href, origin, pathname, port, protocol, search
		} = window.location



		var urlGet = protocol + '//' + hostname + ':' + port;

        function salah() {
            Swal.fire({
                icon: 'warning',
                title: 'Oops...',
                text: 'Gak bisa klik ini ^_^',
            })
        }


        function isiPesan() {
            Swal.fire({
                icon: 'warning',
                title: 'Oops...',
                text: 'Gak boleh kosong pesan nya @_@',
            })
        }


        function openAi() {
            var protocol = (window.location.protocol == 'http:') ? 'http://' : 'https://';
            var hostname = protocol + location.hostname;
            hostname = 'https://litbang.himasiunsub.com/';
            // hostname = 'http://localhost:8777/php_post.php';
            var chat = $('#textAreaExample').val();
            

            if (chat != '') {
                $('#send').hide();
                $('#send-progress').show();
                $.ajax({
                    url: hostname + '/openai/data.php',
                    method: 'GET', // POST
                    data: {
                        ajax: true,
                        chat: chat,
                    },
                    dataType: 'json', // json
                    success: function (data) {
                        // console.log(data);
                        $('#textAreaExample').val('')
                        $('#send').show();
                        $('#send-progress').hide();
                        var result = $('#result').html();
                        // console.log(result);
                        var formatChatAi = `<div class="d-flex flex-row justify-content-start mb-4">
                                    <img src="https://openai.com/content/images/size/w256h256/2020/09/icon-1.png"
                                        alt="avatar 1" style="width: 45px; height: 100%;">
                                    <div class="p-3 ms-3"
                                        style="border-radius: 15px; background-color: rgba(57, 192, 237,.2);">
                                        <p class="small mb-0">` + data.choices[0].text.toString() + `</p>
                                    </div> 
                                </div>`;

                                // https://litbang.himasiunsub.com/openai/profa.png
                        var formatChatUser = `<div class="d-flex flex-row justify-content-end mb-4">
                        <div class="p-3 me-3 border" style="border-radius: 15px; background-color: #fbfbfb;">
                            <p class="small mb-0">` + chat + `</p>
                        </div>
                        <img src="http://localhost/profa/ASSETS/Profa/Icon/Rounded/icon 2.png"
                            alt="avatar 1" style="border-radius: 50%;width: 45px; height: 100%;">
                        </div>`;
                        // $('#result').html('');
                        $('#result').html(result + formatChatUser + formatChatAi);

                        var scrollBottom = document.getElementById('result');
                        scrollBottom.scrollTop = scrollBottom.scrollHeight;

                        document.getElementById("textAreaExample").focus();
                    }
                });
            } else {
                isiPesan();
            }
            
        }
        $('#textAreaExample').on('keypress', function (event) {
            // If the user presses the "Enter" key on the keyboard
            if (event.key === "Enter") {
                // Cancel the default action, if needed
                event.preventDefault();
                // Trigger the button element with a click
                // document.getElementById("myBtn").click();
                openAi();
            }
        });


        $('#send').on('click', function () {
            openAi();
        })
    </script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.0.1/mdb.min.js"></script>
</body>

</html>